(()=>{"use strict";var e={365:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,":root {\n  --font-size-xs: 8px;\n  --font-size-small: 16px;\n  --font-size-medium: 24px;\n  --font-size-large: 48px;\n}\n\nbody {\n  display: flex;\n  flex-direction: column;\n  align-items: space-between;\n  font-size: var(--font-size-medium);\n}\n\nheader {\n  display: flex;\n  justify-content: center;\n  padding: var(--font-size-xs);\n}\n\n#content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  padding: var(--font-size-small);\n}\n\n#player-side {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n}\n\n#computer-side {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n}\n\n.row-2 {\n  display: flex;\n  justify-content: space-between;\n}\n\n#restart-button {\n  font-size: var(--font-size-medium);\n  padding: var(--font-size-xs) var(--font-size-large);\n  margin: var(--font-size-xs);\n  display: none;\n}\n",""]);const a=o},147:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,".grid {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: var(--font-size-small);\n  column-gap: 72px;\n}\n\n.row {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.grid-cell {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  width: var(--font-size-large);\n  height: var(--font-size-large);\n  align-items: center;\n  border: 1px solid darkblue;\n}\n\n.blue-border {\n  border: 1px solid darkblue;\n}\n\n#player-ships,\n#computer-ships {\n  display: flex;\n  justify-content: space-between;\n  gap: var(--font-size-small);\n  align-items: center;\n}\n",""]);const a=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&o[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},o=[],a=0;a<e.length;a++){var l=e[a],c=i.base?l[0]+i.base:l[0],d=r[c]||0,p="".concat(c," ").concat(d);r[c]=d+1;var h=n(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var f=s(u,i);i.byIndex=a,t.splice(a,0,{identifier:p,updater:f,references:1})}o.push(p)}return o}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var r=i(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var a=n(r[o]);t[a].references--}for(var l=i(e,s),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var i=n(72),s=n.n(i),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),d=n.n(c),p=n(540),h=n.n(p),u=n(113),f=n.n(u),m=n(365),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=h(),s()(m.A,g),m.A&&m.A.locals&&m.A.locals;var y=n(147),v={};function b(e){const t=document.createElement("span");return t.innerText=e,t.classList.add("material-symbols-outlined"),t}v.styleTagTransform=f(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=h(),s()(y.A,v),y.A&&y.A.locals&&y.A.locals;const w="sailing",z={LEFT:[0,-1],RIGHT:[0,1],DOWN:[1,0],UP:[-1,0]};class E extends Set{add(e){super.add(this.#e(e))}has(e){return super.has(this.#e(e))}delete(e){return super.delete(this.#e(e))}#e(e){return e.join(",")}}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e+Math.floor(Math.random()*(t-e+1))}function x(e,t){let n,i;do{n=S(0,e-1),i=S(0,e-1)}while(t.has([n,i]));return[n,i]}function C(e){return new Promise((t=>setTimeout(t,e)))}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const s=document.createElement("span");return s.setAttribute("id",e),s.classList.add("grid-cell"),s.innerText=i,e?.startsWith("computer")&&t>-1&&n>-1&&s.addEventListener("click",window.controller.clickCell),s}function T(e,t){const n=document.createElement("div");n.classList.add("blue-border");const i=document.createElement("div");i.appendChild(A()),i.classList.add("row");for(let n=0;n<t;n++)i.appendChild(A(`${e}-row-${n}`,-1,-1,n));n.appendChild(i);for(let i=0;i<t;i++){const s=document.createElement("div");s.classList.add("row"),n.appendChild(s),s.appendChild(A(`${e}-col-${i}`,-1,-1,i));for(let n=0;n<t;n++)s.appendChild(A(`${e}-${i}-${n}`,i,n))}const s=document.getElementById(e+"-grid");s.replaceChildren(),s.appendChild(n)}function k(e){T("player",e.size),T("computer",e.size),function(e){for(let t=0;t<e.size;t++)for(let n=0;n<e.size;n++)if(null!==e.at(t,n)){const e=document.getElementById(`player-${t}-${n}`);e.appendChild(b(w)),e.style.color="lightgrey"}}(e),document.getElementById("restart-button").style.display="none"}function I(e,t){const n=document.getElementById(`${e}-ships`);n.replaceChildren(),n.appendChild(b(w));const i=document.createElement("span");i.innerText=t,n.appendChild(i)}const j=["Carrier",5],R=["Battleship",4],O=["Destroyer",3],P=["Submarine",3],$=["Patrol Boat",2];class B{constructor(e,t){this.type=e,this.size=t,this.hits=0,this.positions=[]}}Object.assign(B.prototype,{getSize(){return this.size},hit(){if(!(this.size>this.hits))throw new Error("Ship already sunk");this.hits++},getRemainingHits(){return this.size-this.hits},isSunk(){return this.hits===this.size}});class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.size=e,this.ships={CARRIER:new B(j[0],j[1]),BATTLESHIP:new B(R[0],R[1]),DESTROYER:new B(O[0],O[1]),SUBMARINE:new B(P[0],P[1]),PATROL_BOAT:new B($[0],$[1])},this.clickedCells=new E,this.activeShips=Object.keys(this.ships).length,this.board=[];for(let t=0;t<e;t++){const t=[];for(let n=0;n<e;n++)t.push(null);this.board.push(t)}}}Object.assign(L.prototype,{receiveAttack(e,t){if(e<0||e>=this.size)throw new Error("row must be between 0 and "+(this.size-1));if(t<0||t>=this.size)throw new Error("col must be between 0 and "+(this.size-1));if(this.clickedCells.has([e,t]))throw new Error("Cell already clicked");{this.clickedCells.add([e,t]);const n=this.at(e,t);return null!==n?(n.hit(),n.isSunk()?(this.activeShips--,{state:2,positions:n.positions}):{state:0,positions:[[e,t]]}):{state:1,positions:[[e,t]]}}},at(e,t){if(e<0||e>=this.size)throw new Error("row must be between 0 and "+(this.size-1));if(t<0||t>=this.size)throw new Error("col must be between 0 and "+(this.size-1));return this.board[e][t]},initializeShip(e,t,n,i){if(i.positions=[],e<0||e>=this.size)throw new Error("startRow must be between 0 and "+(this.size-1));if(t<0||t>=this.size)throw new Error("startCol must be between 0 and "+(this.size-1));switch(n){case 0:if(t+i.size>=this.size)throw new Error("Ship goes out of bounds");for(let n=t;n<t+i.size;n++){if(null!==this.at(e,n))throw new Error("Ship overlaps with an existing ship");for(let[t,i]of Object.values(z)){const s=e+t,r=n+i;if(s>=0&&s<this.size&&r>=0&&r<this.size&&null!==this.at(s,r))throw new Error("Ship sides with an existing ship")}}for(let n=t;n<t+i.size;n++)this.board[e][n]=i,i.positions.push([e,n]);break;case 1:if(e+i.size>=this.size)throw new Error("Ship goes out of bounds");for(let n=e;n<e+i.size;n++){if(null!==this.at(n,t))throw new Error("Ship overlaps with an existing ship");for(let[e,i]of Object.values(z)){const s=n+e,r=t+i;if(s>=0&&s<this.size&&r>=0&&r<this.size&&null!==this.at(s,r))throw new Error("Ship sides with an existing ship")}}for(let n=e;n<e+i.size;n++)this.board[n][t]=i,i.positions.push([n,t]);break;default:throw new Error("Invalid direction")}},initializeShips(){this.initializeShip(8,1,0,this.ships.CARRIER),this.initializeShip(3,8,1,this.ships.BATTLESHIP),this.initializeShip(2,0,1,this.ships.SUBMARINE),this.initializeShip(6,2,0,this.ships.DESTROYER),this.initializeShip(0,3,0,this.ships.PATROL_BOAT)},allShipsSunk(){return Object.values(this.ships).reduce(((e,t)=>t.isSunk()&&e),!0)}});class M{constructor(){this.gameboard=new L,this.hangingCells=new E}}Object.assign(M.prototype,{play(e,t){const{state:n,positions:i}=this.gameboard.receiveAttack(e,t);return 0===n&&this.hangingCells.add([e,t]),2===n&&i.forEach((e=>{let[t,n]=e;this.hangingCells.delete([t,n])})),{state:n,positions:i}},randomizeShips(){Object.values(this.gameboard.ships).forEach((e=>{let t=!1,n=0;for(;!t&&n<100;){const[i,s]=this.getRandomCell();try{this.gameboard.initializeShip(i,s,this.getRandomDirection(),e),t=!0}catch(e){console.log(e),n++}}if(!t)throw Error(`Failed to place ${e.type[0]} after 100 attempts`)}))},getRandomDirection:()=>S(0,1)<1?0:1,getRandomCell(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(-1===e||-1===t){const n=this.tryAdjacentCells();if(n)return n;[e,t]=x(this.gameboard.size,this.gameboard.clickedCells)}return[e,t]},getActiveShips(){return this.gameboard.activeShips},tryAdjacentCells(){if(0===this.hangingCells.size)return x(this.gameboard.size,this.gameboard.clickedCells);let e,t,n=!0,i=!1,s=!1;for(let r of this.hangingCells){const[o,a]=r.split(",").map(Number);n?(e=o,t=a,n=!1):(o===e&&(i=!0),a===t&&(s=!0))}const r=i?[[0,-1],[0,1]]:s?[[-1,0],[1,0]]:Object.values(z);for(let e of this.hangingCells){const[t,n]=e.split(",").map(Number);for(let[e,i]of r){const s=t+e,r=n+i;if(s>=0&&s<this.gameboard.size&&r>=0&&r<this.gameboard.size&&!this.gameboard.clickedCells.has([s,r]))return[s,r]}}for(let e of this.hangingCells){const[t,n]=e.split(",").map(Number);for(let[e,i]of Object.values(z)){const s=t+e,r=n+i;if(s>=0&&s<this.gameboard.size&&r>=0&&r<this.gameboard.size&&!this.gameboard.clickedCells.has([s,r]))return[s,r]}}return x(this.gameboard.size,this.gameboard.clickedCells)}});const N={player:new M,computer:new M,isPlayerTurn:!0,changeTurn(){this.isPlayerTurn=!this.isPlayerTurn}},D={clickCell(e){if(!N.isPlayerTurn)return;const t=e.target,[n,i,s]=t.id.split("-").map(Number);t.removeEventListener("click",D.clickCell),H(i,s,N.player),async function(){for(;!N.isPlayerTurn;){let[e,t]=N.player.getRandomCell();await H(e,t,N.computer),await C(500)}}()}};async function H(e,t,n){return new Promise((i=>{const s=n===N.player?"computer":"player",{state:r,positions:o}=n===N.player?N.computer.play(e,t):N.player.play(e,t);!function(e,t,n,i,s){const r=document.getElementById(`${n}-${e}-${t}`);switch(r.replaceChildren(),r.style.color="player"===n?"red":"blue",i){case 0:r.appendChild(b(w));break;case 1:const e=b("water");r.appendChild(e),e.style.fontSize="16px",r.style.color="black";break;case 2:s.forEach((e=>{let[t,i]=e;const s=document.getElementById(`${n}-${t}-${i}`);s.replaceChildren(),s.appendChild(b("destruction")),s.style.color="player"===n?"red":"blue"}))}}(e,t,s,r,o),I("player",N.player.getActiveShips()),I("computer",N.computer.getActiveShips()),1===r&&N.changeTurn(),N.player.getActiveShips()<1&&U("Computer"),N.computer.getActiveShips()<1&&U("Player"),setTimeout((()=>i(r)),500)}))}function U(e){N.isPlayerTurn=!0;for(let e=0;e<N.player.gameboard.size;e++)for(let t=0;t<N.player.gameboard.size;t++)document.getElementById(`computer-${e}-${t}`).removeEventListener("click",D.clickCell);const t=document.getElementById("header");t.innerText=`${e} Wins!`,t.style.fontSize="48px",document.getElementById("restart-button").style.display="block"}window.controller=D,N.player.randomizeShips(),N.computer.randomizeShips(),document.getElementById("restart-button").addEventListener("click",(function(){N.player=new M,N.computer=new M,N.isPlayerTurn=!0,N.player.randomizeShips(),N.computer.randomizeShips(),I("player",N.player.getActiveShips()),I("computer",N.computer.getActiveShips()),k(N.player.gameboard)})),k(N.player.gameboard),I("player",N.player.getActiveShips()),I("computer",N.computer.getActiveShips())})();